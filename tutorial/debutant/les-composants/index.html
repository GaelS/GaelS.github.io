<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="TL;DRIl existe deux types de composant en React :Composant fonctionnel : fonction prenant en paramètre un objet appelé props et retournant du JSXCompo"><meta name="author" content="Gaël Servaud"><meta property="og:title" content="Les composants"><meta property="og:site_name" content="Apprendre ReactJS"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><title>Les composants - Apprendre ReactJS</title><link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><link rel="stylesheet" href="/css/style.css"><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-96190899-1","auto"),ga("send","pageview")</script></head><body><div class="w-100 bg-1 ph5-ns ph3 text-light"><nav class="db dt-l w-100 mw8 center border-box pv3"><a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Apprendre ReactJS"><img src="/images/ReactLogo.svg" class="dib h3" alt="Apprendre ReactJS"></a><div class="db dtc-l v-mid w-100 w-75-l tc tr-l"><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/" title="Home">Home </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/archives" title="Archives">Archives </a><a class="link dim f6 f5-l dib mr3 mr4-l white" href="/about" title="A propos">A propos</a></div></nav><div class="w-100 mw8 center vh-40 dt"><div class="dtc v-mid white"><h1 class="f1-l f2-m tc tc-m tl-ns">Les composants</h1><p class="f4 fw3 pab-100px tc tc-m tl-ns">24/03/2017</p></div></div><div class="relative w-100 mw8 center white dn dn-m db-ns"><i class="header-icon fa fa-code"></i></div></div><div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l"><div class="content"><div class="mw8 center"><div class="cf"><div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content"><div class="tags-container-vertical"><div class="tags-sub-container"><a class="fw3 ph1 dib" href="/tags/bases/">#bases</a> <a class="fw3 ph1 dib" href="/tags/composant/">#composant</a></div></div><blockquote><h4 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h4><p>Il existe deux types de composant en React :</p><ul><li>Composant fonctionnel : fonction prenant en paramètre un objet appelé <strong>props</strong> et retournant du JSX</li><li>Composant à état : Classe possédant <strong>obligatoirement</strong> une méthode <code>render</code> retournant du JSX, recevant des props et possédant un <code>state</code> représentant l’état interne du composant, modifiable en invoquant la fonction <code>setState</code>.</li></ul></blockquote><p>Aujourd’hui, nous allons nous intéresser à la base de toute application React, son alpha et son omega : le composant. Il en existe 2 types.</p><h3 id="Le-composant-fonctionnel"><a href="#Le-composant-fonctionnel" class="headerlink" title="Le composant fonctionnel"></a>Le composant fonctionnel</h3><p>Découvrons un composant fonctionnel dans sa forme la plus simple :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> HelloWorld = <span class="function"><span class="params">()</span> =&gt;</span> (</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line">);</div></pre></td></tr></table></figure><p>C’est une fonction ayant la signature suivante <code>void =&gt; JSX</code></p><p>Ce composant React est totalement statique en l’état, on ne peut pas modifier son état depuis l’extérieur. Pour régler cela, nous allons lui passer un objet en paramètre : un objet <strong>props</strong>. La signature de la fonction va donc changer pour devenir <code>object =&gt; JSX</code>.</p><p>On réécrit le composant HelloWorld de la façon suivante :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> HelloWorld = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;(</div><div class="line">  <span class="comment">//notre objet est de la forme &#123; user : XXX &#125;</span></div><div class="line">  <span class="keyword">let</span> user = props.user;</div><div class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;user&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></div><div class="line">)&#125;;</div></pre></td></tr></table></figure><p>Notre composant a déjà bien évolué, que s’est-il passé ?</p><p><code>HelloWorld</code> reçoit un objet en argument, on extrait son attribut <code>user</code> et, on l’insère dans notre JSX grâce à <code>{}</code>, ainsi, notre composant est devenu “dynamique” puisqu’il affiche un texte modifié en fonction de l’objet qu’il reçoit.</p><p>Ces <strong>props</strong>, le composant va les utiliser pour générer son UI, mais il peut les modifie pas.</p><blockquote><p>Les <strong>props</strong> sont reçu par le composant parent. Ce sont des éléments en “lecture seule”, il ne sont pas modifiables depuis le composant mais affecte son rendu.</p></blockquote><p>Pour rappel, le passage de <code>props</code> à notre composant se fait de la façon suivante en JSX: <code>&lt;HelloWorld user=&#39;Gaël&#39; /&gt;</code></p><p>Si le composant que l’on vient d’écrire se nomme composant “fonctionnel”, c’est parce qu’il est créé en utilisant une fonction pure, une fonction dont le résultat ne dépend que des arguments reçus et rien d’autre.</p><p>Mais qu’en est-il si notre composant doit gérer un état interne pouvant influencer son rendu ?</p><h3 id="Le-composant-a-etat-ou-stateful"><a href="#Le-composant-a-etat-ou-stateful" class="headerlink" title="Le composant à état (ou stateful)"></a>Le composant à état (ou <em>stateful</em>)</h3><p>Découvrons un composant <em>stateful</em> dans sa forme la plus simple :<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;	</div><div class="line">  <span class="keyword">constructor</span>(props) &#123; </div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      <span class="attr">happy</span> : <span class="literal">false</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">const</span> user = <span class="keyword">this</span>.props.user;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;user&#125;, I guess you are &#123; !this.state.happy || 'happy' &#125; today! <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span> );</div><div class="line">  &#125; </div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><p>Un composant <em>stateful</em> est donc une classe JavaScript qui étend la classe <code>Component</code> de React. Pour le moment, nous n’allons pas nous attarder sur cet élément.</p><p>Comme toute classe, elle possède un constructeur (qui appelle le constructeur de la classe dont elle hérite via la méthode <code>super</code>.</p><p>La ligne suivant se révèle plus intéressante. On assigne en effet à <code>this</code>, notre objet courant (aka le composant React que l’on est en train de créer), un attribut que l’on nomme <code>state</code>. Dans le cadre de notre exemple, on l’initialise en créant une clé <code>happy</code> ayant la valeur <code>false</code>.</p><blockquote><p>Ce <code>state</code> correspond à <em>l’état interne</em> de notre composant, contrairement au <code>props</code> venant du composant parent.<br>Ces deux éléments sont essentiels en React.</p></blockquote><p>Ensuite, on trouve la méthode <code>render</code>, méthode <strong>INDISPENSABLE</strong> dans tout composant React stateful qui se respecte. C’est cette fonction qui sera appelée pour rendre le composant.</p><blockquote><p>Pour faire une lien avec la première partie, on peut dire qu’un composant fonctionnel ne se définit que par sa méthode <code>render</code>.</p></blockquote><p>Cette méthode <code>render</code> retourne quelque chose de très similaire au composant fonctionnel excepté que, cette fois, le <code>this.state</code>, l’état interne du composant ET le <code>this.props</code> impacte le JSX retourné.</p><p>En l’état, le composant à donc un état interne, seulement, rien ne peut le modifier, donc le composant affichera toujours la même chose.</p><p>Nous allons donc rajouter un bouton sur lequel cliquer déclenche le changement du state, faisant passer <code>this.state.happy</code> de <code>true</code> à <code>false</code> et inversement :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">const</span> user = <span class="keyword">this</span>.props.user;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;user&#125;, I know you are &#123; !this.state.happy || 'happy' &#125; ! <span class="tag">&lt;/<span class="name">p</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'button'</span> <span class="attr">value</span>=<span class="string">'Click me !'</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    );</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Voilà pour la création du bouton, très similaire à ce que l’on ferait avec du HTML classique. Comment jouer avec le <code>state</code> maintenant ?<br>Pour rappel, on encapsule l’<code>input</code> et le <code>p</code> dans un <code>div</code> car un composant React ne doit retourner qu’un seul noeud DOM. Si ce n’est pas le cas, vous obtiendrez un erreur (on verra plus tard pourquoi).</p><p>Pour commencer, le <code>state</code> ne se modifie qu’avec la méthode <code>setState</code> (on verra pourquoi dans un autre article), on passe toujours (toujours, toujours) par la méthode <code>setState</code> pour le modifier.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">constructor(props) &#123; </div><div class="line">  <span class="keyword">super</span>(props);</div><div class="line">  <span class="keyword">this</span>.state = &#123;</div><div class="line">    <span class="attr">happy</span> : <span class="literal">false</span></div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">changerHumeur() &#123;</div><div class="line">  <span class="keyword">this</span>.setState(&#123;</div><div class="line">    <span class="attr">happy</span> : !<span class="keyword">this</span>.state.happy</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>Maintenant, il faut brancher cette méthode au clique de notre bouton. Le JSX va nous être très utile puisqu’il nous permet de lier une méthode de la classe à un évènement DOM classique ( click, hover, submit, change, etc.)* via une syntaxe particulière mais simple (onClick, mouseOver, onSubmit, onChange, etc.).</p><p>Ainsi, il suffira de modifier la méthode de rendering comme suit :</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">render() &#123;</div><div class="line">  <span class="keyword">let</span> user = <span class="keyword">this</span>.props.user;</div><div class="line">  <span class="keyword">return</span> (</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></div><div class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">        Hello &#123;user&#125;, I guess you are</div><div class="line">        &#123; !this.state.happy ? ' not ' : ' ' &#125; </div><div class="line">        happy today! </div><div class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'button'</span> <span class="attr">value</span>=<span class="string">'Click me !'</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changerHumeur.bind(this)&#125;</span> /&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  )</div><div class="line">&#125;;</div></pre></td></tr></table></figure><p>Maintenant, cliquer sur le bouton appelle la méthode <code>changerHumeur</code> qui va changer le state via la méthode <code>setState</code> et donc mettre à jour le texte que le composant affiche ! Le composant répond maintenant aux intéractions utilisateurs !</p><p>Pour résumé :</p><ul><li>fonctionnel = fonction simple qui prend en argument un objet props et rend du contenu sous forme de JSX</li><li>stateful = composant “complexe” recevant des props et possédant son <code>state</code> interne interne pour générer son rendu.</li></ul><p>Voilà pour la présentation des deux types de composants existants. Nous allons détailler dans un prochain article de quelle façon ces composants React se rattachent au DOM.</p><p>*La liste exhaustive est ici : <a href="https://facebook.github.io/react/docs/events.html#supported-events" target="_blank" rel="noopener">https://facebook.github.io/react/docs/events.html#supported-events</a></p><div class="tags-container-bottom"><i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/bases/">#bases</a> <a class="fw3 ph1 dib" href="/tags/composant/">#composant</a></div><div id="disqus_thread" class="mt5"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div><div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50"><hr class="dn-l mw4 black-50 mt5"><div class="mt5 mt0-l"><article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3"><div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width:6rem"><img src="/images/profile.jpg" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Gaël Servaud"></div><div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">Mon nom est Gaël Servaud<br>je suis développeur web fullstack freelance avec un fort intérêt pour les problématiques front-end.<br>Avec ce blog, je souhaite partager mes découvertes, mes projets perso et mes réflexions sur la librairie React et son écosystème foisonnant.</div></article></div><hr class="dn-l mw4 black-50 mt5"><div class="mt5 tc tl-l"><h3>Catégories</h3><p><a href="/categories/tutorial/">tutorial</a></p><p><a href="/categories/tutorial/debutant/">débutant</a></p></div><hr class="dn-l mw4 black-50 mt5"><div class="mt5 tc tl-l"><h3>Récemment</h3><p><a href="/tutorial/library/state/Supprimer-Redux-en-utilisant-l-url-de-votre-application/">Supprimer Redux en utilisant l&#39;url de votre applic</a></p><p><a href="/lifestyle/code/terminer-ses-projets-perso/">Terminer ses projets perso...</a></p><p><a href="/tutorial/library/React-Redux-from-scratch/">React Redux from scratch</a></p><p><a href="/tutorial/library/flux/redux-from-scratch/">Redux from scratch</a></p><p><a href="/tutorial/debutant/render-et-virtual-dom/">React et le DOM</a></p></div></div></div></div></div></div><div class="bg-1 ph2 ph5-ns pv5"><div class="mv8"><div class="center tc"><div class="dib mh3"><a class="f3 f2-ns white dim" href="https://twitter.com/GaelS3" target="_blank"><i class="fa fa-twitter"></i></a></div><div class="dib mh3"><a class="f3 f2-ns white dim" href="https://github.com/GaelS" target="_blank"><i class="fa fa-github"></i></a></div></div><div class="f6 f5-ns center tc white pt5 fw3">All rights reserved | Gaël Servaud | 9 PEAKS | 2017</div></div></div><script type="text/javascript">var disqus_shortname="www-apprendre-react-fr";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></body></html>